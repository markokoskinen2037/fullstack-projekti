language: node_js
node_js:
  - 10
addons:
  apt:
    packages:
      # Ubuntu 16+ does not install this dependency by default, so we need to install it ourselves
      - libgconf-2-4
cache:
  npm: true
  directories:
    # we also need to cache folder with Cypress binary
    - ~/.cache


script:
   - echo Starting back- and frontend, then running tests...
   - cd backend/
   - npm install
   - npm start &
   - echo Backend started....................
   - cd ..
   - cd frontend/aikatauluttaja
   - npm install
   - npm start &
   - echo Frontend started..................
   - $(npm bin)/cypress run --record --key=8d934730-49e2-46ac-946b-63e79d9e1797